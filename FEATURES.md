# üéØ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ë–æ—Ç–∞

## üí¨ –û–±–º–µ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

–ö–æ–≥–¥–∞ –¥–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞–π–¥—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞:

1. –û–±–∞ –Ω–∞–≤–∏–¥—è—Ç –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –≤ —á–∞—Ç–µ
2. –ö–∞–∂–¥–æ–µ –ø–∏—Å—å–º–æ —Ç—É—Ç –∂–µ –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫—É
3. –ö–æ–Ω–≤–µ—Ä—Å–∞—Ü–∏—è —Å–æ—Å—Ç–æ–∏—Ç –¥–æ 1 —Ä–∞–∑–≥–æ–≤–æ—Ä

### –ü—Ä–∏–º–µ—Ä –æ–±–º–µ–Ω–∞:

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 1:                   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 2:

üîç –ù–∞–π—Ç–∏ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞               üîç –ù–∞–π—Ç–∏ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞
‚úÖ –ú–∞—Ç—á –Ω–∞–π–¥–µ–Ω!              ‚úÖ –ú–∞—Ç—á –Ω–∞–π–¥–µ–Ω!

üí¨: –ü—Ä–∏–≤–µ—Ç!          ‚Üí    üí¨ **–°–æ–±–µ—Å–µ–¥–Ω–∏–∫:** –ü—Ä–∏–≤–µ—Ç!
‚≠ê –û—Ü–µ–Ω–∏—Ç—å              [–ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏—è]
üö´ –ñ–∞–ª–æ–±–∞
üõë –ó–∞–≤–µ—Ä—à–∏—Ç—å

üí¨: –ö–∞–∫ –¥–µ–ª–∞?  ‚Üí    üí¨ **–°–æ–±–µ—Å–µ–¥–Ω–∏–∫:** –ö–∞–∫ –¥–µ–ª–∞?
```

---

## ‚≠ê –û—Ü–µ–Ω–∫–∞ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞

–û—Ü–µ–Ω–∏—Ç–µ –æ–±—â–µ–Ω–∏–µ –æ—Ç 1 –¥o 5 –∑–≤–µ–∑–¥:

- ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê - –û—Ç–ª–∏—á–Ω–æ! –ú–Ω–µ –≤—ã —Å–Ω–æ–≤–∞ –ø—Ä–∞–≤–∏—Ç–µ—Å—å
- ‚≠ê‚≠ê‚≠ê‚≠ê - –•–æ—Ä–æ—à–æ
- ‚≠ê‚≠ê‚≠ê - –ù–æ—Ä–º–∞–ª—å–Ω–æ
- ‚≠ê‚≠ê - –ü–ª–æ—Ö–æ
- ‚≠ê - –£–∂–∞—Å–Ω–æ 

–ü–æ—Å–ª–µ –æ—Ü–µ–Ω–∫–∏ —á–∞—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–π–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è.

---

## üö´ –ñ–∞–ª–æ–±–∞ –Ω–∞ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞

–ï—Å–ª–∏ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫ –ø–æ—ç—Ç—Å—è –Ω–µ–ø—Ä–∏–ª–∏—á–Ω—ã–º–∏ –æ—Å–æ–±–ª–µ–Ω–Ω–æ—Å—Ç—è–º–∏:

### –û—Å–Ω–æ–≤–∞–Ω–∏—è –¥–ª—è –∂–∞–ª–æ–±:

- üö´ **–°–ø–∞–º** - –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏, —Ä–µ–∫–ª–∞–º–∞
- üò§ **–û—Å–∫–æ—Ä–±–ª–µ–Ω–∏–µ** - –û—Ñ–µ–Ω—Å–∏–≤–Ω—ã–µ –≤—ã—Å–∫–∞–∑—ã–≤–∞–Ω–∏—è
- üîû **–ö–æ–Ω—Ç–µ–Ω—Ç** - 18+ –∫–æ–Ω—Ç–µ–Ω—Ç
- üò† **–î–æ–º–æ–≥–∞—Ç–µ–ª—å—Å—Ç–≤–æ** - –ù–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–≤–æ–¥—ã
- ‚ùå **–î—Ä—É–≥–æ–µ** - –ü—Ä–æ—á–∏–µ –≤–æ–ø—Ä–æ—Å—ã

–ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∂–∞–ª–æ–±—ã —á–∞—Ç –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –∏ –∂–∞–ª–æ–±–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î.

---

## üõë –ó–∞–≤–µ—Ä—à–∏—Ç—å —á–∞—Ç

–ù–∞–∂–º–∏—Ç–µ —Ö–æ—Ç–∏—Ç–µ –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä:

- –ß–∞—Ç –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è
- –í—ã –≤–≤—Ä–æ–¥–∏—Ç–µ—Å—å –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–µ –º–µ–Ω—é
- –ú–æ–∂–Ω—Ç–µ –Ω–∞–π—Ç–∏ –Ω–æ–≤–æ–≥–æ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞

---

## üí´ –ü—Ä–∞–≤–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≤ —á–∞—Ç–µ

```python
def get_chat_actions_keyboard():
    """–ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –≤ —á–∞—Ç–µ"""
    return InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="‚≠ê –û—Ü–µ–Ω–∏—Ç—å", callback_data="rate_user")],
        [InlineKeyboardButton(text="üö´ –ñ–∞–ª–æ–±–∞", callback_data="report_user")],
        [InlineKeyboardButton(text="üõë –ó–∞–≤–µ—Ä—à–∏—Ç—å —á–∞—Ç", callback_data="end_chat")],
    ])
```

### –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

```python
async def handle_chat_message(message: Message, state: FSMContext):
    """–û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ"""
    data = await state.get_data()
    chat_id = data.get('chat_id')
    partner_id = data.get('partner_id')
    
    # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î
    db.save_message(chat_id, message.from_user.id, message.text)
    
    # –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫—É
    await message.bot.send_message(
        partner_id,
        f"üí¨ **–°–æ–±–µ—Å–µ–¥–Ω–∏–∫:** {message.text}",
        reply_markup=get_chat_actions_keyboard()
    )
```

---

## üìÑ –ï–≤–µ–Ω—Ç—ã –≤ –ë–î

### –ö–æ–Ω–≤–µ—Ä—Å–∞—Ü–∏—è —Å –∫–Ω–æ–ø–∫–∞–º–∏:

```
Chats table:
- chat_id: "123_124"
- user1_id: 123
- user2_id: 124
- category: "random"
- status: "active" / "ended"
- created_at: 2025-12-28 13:00:00
- ended_at: 2025-12-28 13:05:00

Messages table:
- id: 1
- chat_id: "123_124"
- sender_id: 123
- content: "–ü—Ä–∏–≤–µ—Ç!"
- created_at: 2025-12-28 13:00:05

Reports table:
- id: 1
- chat_id: "123_124"
- reporter_id: 123
- reported_user_id: 124
- reason: "spam"
- created_at: 2025-12-28 13:05:00
```

---

## üöÄ –ó–∞–ø—É—Å–∫

```bash
# –û—Ç –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
python -m bot.main

# –ò–ª–∏
python bot/main.py
```

### –ü–æ–≤–µ–¥–µ–Ω–∏–µ –±–æ—Ç–∞:

1. ^–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—Å—ã–ª–∞–µ—Ç /start
2. –ü—Ä–æ—ç–∏–ª—å –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç—ç—è –≥–µ–Ω–¥–µ—Ä, –≤–æ–∑—Ä–∞—Å—Ç, –∏–Ω—Ç–µ—Ä–µ—Å—ã
3. –ù–∞–Ω–∏–º–∞—é—Ç "üîç –ù–∞–π—Ç–∏ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞"
4. –ß–∞—Ç —Å–≤—è–∑—ã–≤–∞–µ—Ç —Ç–∏—Ö –±—É–∑ —ç–∫—Ä–∞–Ω–∞
5. –ù–∞ –∫–∞—Ö–¥–æ–æ —Å–æ–æ–±—â–µ–Ω–∏–µ —Ç—Ç–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∞ —ç –æ–ø—Ç–∏–æ–Ω–∞–ª—å–Ω–æ –ø—Ä–æ–∑–∫—Ä—ã–Ω—ã–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏
6. –ì–¥–µ-–Ω–∏–±—É–¥—å –º–æ–∂–Ω–æ –æ—Ü–µ–Ω–∏—Ç—å, —Ä–µ—Ä–¥–æ—Ä—Ç–∏—Ç—å –∏–ª–∏ –∑–∞–≤–µ—Ä—à–∏—Ç—å

---

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∫–Ω–æ–ø–∫–∏ –≤ —á–∞—Ç–µ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–æ–º–ø–æ–Ω–µ–Ω—Ç `get_chat_actions_keyboard()` –≤ main.py

---

## ‚úÖ –•–æ—Ç —ç—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

üìã –ì–∞–π–¥: [RUN_FROM_ROOT.md](RUN_FROM_ROOT.md)  
üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: [test_imports.py](test_imports.py)  
üîå –û—Ç–ª–∞–¥–∫–∞: [IMPORT_FIX_SUMMARY.md](IMPORT_FIX_SUMMARY.md)  
